# http 相关面试题

1. 从输入 url 都页面展现出来都发生了什么

   浏览器会构建请求行，构建请求行之后开始检查缓存。检查强缓存（本地缓存），如果命中就直接使用，否则就进行 dns 解析，dns 解析(包括本机 dns 和浏览器 dns 缓存)，远程 dns 服务器解析（递归解析，dns 和服务器缓存），建立 tcp 链接(三次握手)，浏览器向 web 服务器发送 http 请求，服务器返回 http 报文，浏览器解析页面，链接断开（四次挥手），http 请求结束。

2. 三次握手和四次挥手

   三次握手就是在建立 tcp 链接是一个发送包的过程，就是保证建立一个可靠的链接。
   通过三次握手（即总共发送三个数据包来确认已经建立连接），客户端和服务端之间互相确认，都具备收发能力，建立客户端和服务端之间的连接

   1. 第一次握手：客户端发送网络包，服务端收到了。这样服务端就能得出结论：客户端的发送能力、服务端的接收能力是正常的。

   2. 第二次握手：服务端发包，客户端收到了。这样客户端就能得出结论：服务端的接收、发送能力，客户端的接收、发送能力是正常的。 从客户端的视角来看，我接到了服务端发送过来的响应数据包，说明服务端接收到了我在第一次握手时发送的网络包，并且成功发送了响应数据包，这就说明，服务端的接收、发送能力正常。而另一方面，我收到了服务端的响应数据包，说明我第一次发送的网络包成功到达服务端，这样，我自己的发送和接收能力也是正常的。

   3. 第三次握手：客户端发包，服务端收到了。这样服务端就能得出结论：客户端的接收、发送能力，服务端的发送、接收能力是正常的。 第一、二次握手后，服务端并不知道客户端的接收能力以及自己的发送能力是否正常。而在第三次握手时，服务端收到了客户端对第二次握手作的回应。从服务端的角度，我在第二次握手时的响应数据发送出去了，客户端接收到了。所以，我的发送能力是正常的。而客户端的接收能力也是正常的。

   四次挥手就是 tcp 链接在断开始一个确认断开的过程，

3. 缓存相关，强缓存，协商缓存

   强缓存是 利用 Expires 和 Cache-Control 两个字段来控制，用来表示资源的缓存时间，强缓存命中，普通刷新会忽略，但不会清除，强制刷新会清除。浏览器强制刷新，请求会带上 Cache-Control:no-cache 或者 Pragma:no-cache。

   那么什么是 Expires 和 Cache-Control 呢？它们分别是 1.0 和 1.1 出现的用来表示缓存的过期时间的。其中 Cache-Control 优先级高。 Cache-Control 的可选值

   1. no-cache：不使用本地缓存。需要使用缓存协商，先与服务器确认返回的响应是否被更改，如果之前的响应中存在 ETag，那么请求的时候会与服务端验证，如果资源未被更改，则可以避免重新下载。
   2. no-store：直接禁止游览器缓存数据，每次用户请求该资源，都会向服务器发送一个请求，每次都会下载完整的资源。
   3. public：可以被所有的用户缓存，包括终端用户和 CDN 等中间代理服务器。
   4. private：只能被终端用户的浏览器缓存，不允许 CDN 等中继缓存服务器对其缓存。
   5. max-age=300

4. HTTP 请求响应常见状态码
   1. 100~199：表示成功接收请求，要求客户端继续提交下一次请求才能完成整个处理过程。
   2. 200~299：表示成功接收请求并已完成整个处理过程。常用 200。
   3. 300~399：为完成请求，客户需进一步细化请求。例如：请求的资源已经移动一个新地址、常用 302（意味着你请求我，我让你去找别人）, 307 和 304（我不给你这个资源，自己拿缓存）
   4. 400~499：客户端的请求有错误，常用 404（意味着你请求的资源在 web 服务器中没有）403（服务器拒绝访问，权限不够）
   5. 500~599：服务器端出现错误，常用 500
